From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: RoccoDev <hey@rocco.dev>
Date: Mon, 26 Apr 2021 09:50:16 +0200
Subject: [PATCH] (KigPaper) Kick after receiving invalid creative action
 packet

Original code by ProjectKig, licensed under GPLv3
You can find the original code on https://github.com/ProjectKig/KigPaper

diff --git a/src/main/java/net/minecraft/server/network/ServerGamePacketListenerImpl.java b/src/main/java/net/minecraft/server/network/ServerGamePacketListenerImpl.java
index 60373551c49386652de286127636b61f31e88527..05cd95494b3c368eb4d13d7335c662485fd27904 100644
--- a/src/main/java/net/minecraft/server/network/ServerGamePacketListenerImpl.java
+++ b/src/main/java/net/minecraft/server/network/ServerGamePacketListenerImpl.java
@@ -3241,6 +3241,8 @@ public class ServerGamePacketListenerImpl implements ServerPlayerConnection, Ser
                 this.dropSpamTickCount += 20;
                 this.player.drop(itemstack, true);
             }
+        } else {
+            disconnect("Not in creative mode"); // KigPaper
         }
 
     }
